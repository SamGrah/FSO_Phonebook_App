(this.webpackJsonpthephonebook=this.webpackJsonpthephonebook||[]).push([[0],{23:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(17),a=n.n(r),c=n(1),s=n.n(c),o=n(4),u=n(5),i=(n(23),n(3)),b=n(8),f=n(6),d=n.n(f),j="api/persons",p={getAll:function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(j);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),update:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post(j,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.delete("".concat(j,"/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),modify:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.put("".concat(j,"/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=n(0),l=function(e){var t=e.phonebook,n=e.setPhonebook,r=e.setMsgInfo,a=Object(i.useState)(""),c=Object(u.a)(a,2),f=c[0],d=c[1],j=Object(i.useState)(""),l=Object(u.a)(j,2),h=l[0],v=l[1],x=function(){d(""),v("")},O=function(){var e=Object(o.a)(s.a.mark((function e(a){var c,o,u,i,d,j;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),c={name:f,number:h},!(o=t.find((function(e){return e.name===f})))){e.next=27;break}if(u="".concat(f," is already added to phonebook"),c.number!==o.number){e.next=9;break}alert(u),e.next=25;break;case 9:if(i="".concat(u,", replace the older number with a new one?"),!window.confirm(i)){e.next=25;break}return c=Object(b.a)(Object(b.a)({},c),{},{id:o.id}),e.prev=13,e.next=16,p.modify(c);case 16:d=e.sent,n(t.map((function(e){return d.id===e.id?d:e}))),r({className:"success",message:"Updated ".concat(d.name)}),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(13),n(t.filter((function(e){return c.id!==e.id}))),r({className:"error",message:"Information of ".concat(c.name," ")+"has been removed from the server"});case 25:return x(),e.abrupt("return");case 27:return e.next=29,p.update(c);case 29:j=e.sent,n(t.concat(j)),r({className:"success",message:"Added ".concat(j.name)}),x();case 33:case"end":return e.stop()}}),e,null,[[13,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:"add a new"}),Object(m.jsxs)("form",{onSubmit:O,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:f,onChange:function(e){return d(e.target.value)}})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:h,onChange:function(e){return v(e.target.value)}})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})]})},h=function(e){var t=e.phonebook,n=e.setPhonebook,r=e.setMsgInfo;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)("div",{children:t.map((function(e){return Object(m.jsxs)("div",{children:[e.name," ",e.number,Object(m.jsx)("button",{onClick:(t=e,Object(o.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete ".concat(t.name,"?"))){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,p.remove(t.id);case 6:r({className:"success",message:"Deleted ".concat(t.name)}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),r({className:"inform",message:"Information of ".concat(t.name," ")+"isn't present on the server"});case 12:return e.next=14,p.getAll();case 14:a=e.sent,n(a);case 16:case"end":return e.stop()}}),e,null,[[3,9]])})))),children:"delete"})]},e.name);var t}))})]})},v=function(e){var t=e.setFilterText;return Object(m.jsxs)("div",{children:["filter shown with ",Object(m.jsx)("input",{onChange:function(e){var n=e.target.value.toLowerCase();t(n)}})]})},x=function(e){var t=e.msgInfo,n=e.setMsgInfo;return t?(setTimeout((function(){return n()}),3500),Object(m.jsx)("div",{className:"baseClass "+t.className,children:t.message})):Object(m.jsx)(m.Fragment,{})},O=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(),c=Object(u.a)(a,2),b=c[0],f=c[1];Object(i.useEffect)((function(){Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getAll();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]);var d=Object(i.useState)(""),j=Object(u.a)(d,2),O=j[0],g=j[1],k=O.length?n.filter((function(e){return e.name.toLowerCase().includes(O)})):n;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(x,{msgInfo:b,setMsgInfo:f}),Object(m.jsx)(v,{setFilterText:g}),Object(m.jsx)(l,{phonebook:n,setPhonebook:r,setMsgInfo:f}),Object(m.jsx)(h,{phonebook:k,setPhonebook:r,setMsgInfo:f})]})};a.a.render(Object(m.jsx)(O,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.2f1a64b1.chunk.js.map